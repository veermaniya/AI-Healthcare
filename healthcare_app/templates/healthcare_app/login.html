<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HealthAI ‚Äî Secure Login</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --deep: #050d1a;
    --navy: #0a1628;
    --panel: #0f1f35;
    --border: rgba(0,180,255,0.12);
    --accent: #00b4ff;
    --accent2: #00e5a0;
    --accent3: #ff4d6d;
    --text: #e8f4ff;
    --muted: #6b8cae;
    --gold: #ffd166;
  }

  body {
    font-family: 'DM Sans', sans-serif;
    background: var(--deep);
    min-height: 100vh;
    display: flex;
    overflow: hidden;
    color: var(--text);
  }

  /* ‚îÄ‚îÄ LEFT PANEL ‚îÄ‚îÄ */
  .left {
    width: 55%;
    position: relative;
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: 60px;
    overflow: hidden;
  }

  .left::before {
    content: '';
    position: absolute; inset: 0;
    background:
      radial-gradient(ellipse 80% 60% at 20% 30%, rgba(0,180,255,0.08) 0%, transparent 60%),
      radial-gradient(ellipse 60% 80% at 80% 70%, rgba(0,229,160,0.06) 0%, transparent 60%);
  }

  .grid-bg {
    position: absolute; inset: 0;
    background-image:
      linear-gradient(rgba(0,180,255,0.04) 1px, transparent 1px),
      linear-gradient(90deg, rgba(0,180,255,0.04) 1px, transparent 1px);
    background-size: 40px 40px;
  }

  .pulse-circle {
    position: absolute;
    border-radius: 50%;
    animation: pulse-ring 4s ease-out infinite;
  }
  .pulse-circle:nth-child(1) { width: 500px; height: 500px; top: -150px; right: -100px; border: 1px solid rgba(0,180,255,0.08); animation-delay: 0s; }
  .pulse-circle:nth-child(2) { width: 700px; height: 700px; top: -250px; right: -200px; border: 1px solid rgba(0,180,255,0.05); animation-delay: 1.5s; }
  .pulse-circle:nth-child(3) { width: 900px; height: 900px; top: -350px; right: -300px; border: 1px solid rgba(0,180,255,0.03); animation-delay: 3s; }

  @keyframes pulse-ring {
    0% { transform: scale(0.95); opacity: 0.8; }
    50% { transform: scale(1.02); opacity: 0.4; }
    100% { transform: scale(0.95); opacity: 0.8; }
  }

  .brand {
    position: relative;
    z-index: 2;
    margin-bottom: 60px;
  }

  .brand-logo {
    display: flex;
    align-items: center;
    gap: 14px;
    margin-bottom: 10px;
  }

  .logo-icon {
    width: 48px; height: 48px;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    border-radius: 14px;
    display: flex; align-items: center; justify-content: center;
    font-size: 22px;
    box-shadow: 0 0 30px rgba(0,180,255,0.4);
  }

  .brand-name {
    font-family: 'DM Serif Display', serif;
    font-size: 28px;
    letter-spacing: -0.5px;
    background: linear-gradient(90deg, #fff, var(--accent));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .brand-tag {
    font-size: 11px;
    letter-spacing: 3px;
    text-transform: uppercase;
    color: var(--muted);
    margin-left: 62px;
  }

  .hero-title {
    font-family: 'DM Serif Display', serif;
    font-size: clamp(38px, 4vw, 56px);
    line-height: 1.1;
    margin-bottom: 20px;
    position: relative; z-index: 2;
  }

  .hero-title .accent-word {
    font-style: italic;
    background: linear-gradient(90deg, var(--accent), var(--accent2));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .hero-sub {
    font-size: 15px;
    line-height: 1.7;
    color: var(--muted);
    max-width: 440px;
    margin-bottom: 50px;
    position: relative; z-index: 2;
  }

  .feature-pills {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    position: relative; z-index: 2;
  }

  .pill {
    display: flex; align-items: center; gap: 7px;
    padding: 8px 16px;
    background: rgba(0,180,255,0.06);
    border: 1px solid rgba(0,180,255,0.15);
    border-radius: 40px;
    font-size: 12px;
    color: var(--muted);
    transition: all 0.3s;
  }

  .pill:hover { background: rgba(0,180,255,0.12); color: var(--text); border-color: rgba(0,180,255,0.3); }
  .pill .dot { width: 6px; height: 6px; border-radius: 50%; }

  /* ECG line animation */
  .ecg-wrap {
    position: absolute; bottom: 40px; left: 0; right: 0;
    z-index: 2; overflow: hidden; height: 60px;
  }

  .ecg-line {
    stroke: rgba(0,229,160,0.3);
    stroke-width: 1.5;
    fill: none;
    stroke-dasharray: 800;
    stroke-dashoffset: 800;
    animation: draw-ecg 4s ease infinite;
  }

  @keyframes draw-ecg {
    0% { stroke-dashoffset: 800; opacity: 0; }
    20% { opacity: 1; }
    70% { stroke-dashoffset: 0; opacity: 1; }
    100% { stroke-dashoffset: 0; opacity: 0; }
  }

  /* ‚îÄ‚îÄ RIGHT PANEL ‚îÄ‚îÄ */
  .right {
    width: 45%;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 40px;
    background: var(--navy);
    border-left: 1px solid var(--border);
    position: relative;
  }

  .right::before {
    content: '';
    position: absolute; inset: 0;
    background: radial-gradient(ellipse 70% 50% at 50% 0%, rgba(0,180,255,0.05) 0%, transparent 60%);
    pointer-events: none;
  }

  .login-box {
    width: 100%;
    max-width: 400px;
    position: relative; z-index: 2;
  }

  .login-header {
    text-align: center;
    margin-bottom: 36px;
  }

  .login-title {
    font-family: 'DM Serif Display', serif;
    font-size: 28px;
    margin-bottom: 8px;
  }

  .login-sub {
    font-size: 13px;
    color: var(--muted);
  }

  /* Role selector */
  .role-selector {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 8px;
    margin-bottom: 28px;
  }

  .role-btn {
    padding: 12px 8px;
    border: 1px solid var(--border);
    border-radius: 10px;
    background: transparent;
    color: var(--muted);
    cursor: pointer;
    text-align: center;
    font-family: 'DM Sans', sans-serif;
    font-size: 11px;
    transition: all 0.25s;
  }

  .role-btn .role-icon { font-size: 18px; display: block; margin-bottom: 5px; }

  .role-btn.active {
    border-color: var(--accent);
    background: rgba(0,180,255,0.1);
    color: var(--accent);
  }

  .form-group {
    margin-bottom: 18px;
  }

  .form-label {
    display: block;
    font-size: 11px;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    color: var(--muted);
    margin-bottom: 8px;
  }

  .form-input {
    width: 100%;
    padding: 13px 16px;
    background: rgba(255,255,255,0.04);
    border: 1px solid var(--border);
    border-radius: 10px;
    color: var(--text);
    font-family: 'DM Sans', sans-serif;
    font-size: 14px;
    outline: none;
    transition: all 0.25s;
  }

  .form-input:focus {
    border-color: rgba(0,180,255,0.5);
    background: rgba(0,180,255,0.05);
    box-shadow: 0 0 0 3px rgba(0,180,255,0.1);
  }

  .form-input::placeholder { color: var(--muted); opacity: 0.6; }

  .input-wrap { position: relative; }
  .input-icon {
    position: absolute; right: 14px; top: 50%;
    transform: translateY(-50%);
    color: var(--muted); font-size: 16px; cursor: pointer;
    transition: color 0.2s;
  }
  .input-icon:hover { color: var(--accent); }

  .form-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
  }

  .remember {
    display: flex; align-items: center; gap: 8px;
    font-size: 12px; color: var(--muted); cursor: pointer;
  }

  .remember input { accent-color: var(--accent); }

  .forgot { font-size: 12px; color: var(--accent); text-decoration: none; transition: opacity 0.2s; }
  .forgot:hover { opacity: 0.7; }

  .btn-login {
    width: 100%;
    padding: 14px;
    background: linear-gradient(135deg, var(--accent), #0078d4);
    border: none;
    border-radius: 10px;
    color: #fff;
    font-family: 'DM Sans', sans-serif;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    letter-spacing: 0.5px;
    transition: all 0.3s;
    position: relative;
    overflow: hidden;
  }

  .btn-login::before {
    content: '';
    position: absolute; inset: 0;
    background: linear-gradient(135deg, rgba(255,255,255,0.1), transparent);
    opacity: 0;
    transition: opacity 0.3s;
  }

  .btn-login:hover { transform: translateY(-1px); box-shadow: 0 8px 25px rgba(0,180,255,0.35); }
  .btn-login:hover::before { opacity: 1; }
  .btn-login:active { transform: translateY(0); }

  .btn-login.loading { pointer-events: none; opacity: 0.8; }
  .btn-login .spinner { display: none; }
  .btn-login.loading .btn-text { display: none; }
  .btn-login.loading .spinner { display: inline; }

  .divider {
    display: flex; align-items: center; gap: 12px;
    margin: 24px 0;
    color: var(--muted); font-size: 11px;
  }
  .divider::before, .divider::after {
    content: ''; flex: 1;
    height: 1px; background: var(--border);
  }

  .sso-grid {
    display: grid; grid-template-columns: 1fr 1fr;
    gap: 10px;
  }

  .sso-btn {
    padding: 11px;
    border: 1px solid var(--border);
    border-radius: 10px;
    background: transparent;
    color: var(--muted);
    font-family: 'DM Sans', sans-serif;
    font-size: 12px;
    cursor: pointer;
    display: flex; align-items: center; justify-content: center; gap: 8px;
    transition: all 0.25s;
  }
  .sso-btn:hover { border-color: rgba(0,180,255,0.3); color: var(--text); background: rgba(0,180,255,0.05); }

  /* Security badge */
  .security-bar {
    display: flex; align-items: center; justify-content: center; gap: 20px;
    margin-top: 32px;
    padding-top: 24px;
    border-top: 1px solid var(--border);
  }

  .sec-item {
    display: flex; align-items: center; gap: 6px;
    font-size: 10px; color: var(--muted); letter-spacing: 0.5px;
  }

  .sec-dot { width: 6px; height: 6px; border-radius: 50%; background: var(--accent2); animation: blink 2s infinite; }
  @keyframes blink { 0%,100% { opacity: 1; } 50% { opacity: 0.3; } }

  /* Alert bar */
  .alert-bar {
    position: fixed; top: 0; left: 0; right: 0;
    padding: 10px 20px;
    display: flex; align-items: center; justify-content: center; gap: 10px;
    font-size: 12px;
    z-index: 100;
    transform: translateY(-100%);
    transition: transform 0.4s cubic-bezier(0.34,1.56,0.64,1);
  }
  .alert-bar.show { transform: translateY(0); }
  .alert-bar.error { background: rgba(255,77,109,0.15); border-bottom: 1px solid rgba(255,77,109,0.3); color: #ff8fa3; }
  .alert-bar.success { background: rgba(0,229,160,0.1); border-bottom: 1px solid rgba(0,229,160,0.2); color: var(--accent2); }

  /* Responsive */
  @media (max-width: 900px) {
    .left { display: none; }
    .right { width: 100%; }
  }
</style>
</head>
<body>

<!-- Alert bar -->
<div class="alert-bar" id="alertBar"></div>

<!-- LEFT: Branding -->
<div class="left">
  <div class="grid-bg"></div>
  <div class="pulse-circle"></div>
  <div class="pulse-circle"></div>
  <div class="pulse-circle"></div>

  <div class="brand">
    <div class="brand-logo">
      <div class="logo-icon">üè•</div>
      <span class="brand-name">HealthAI</span>
    </div>
    <div class="brand-tag">Intelligence Platform</div>
  </div>

  <h1 class="hero-title">
    Clinical AI<br>
    for the <span class="accent-word">next era</span><br>
    of medicine.
  </h1>

  <p class="hero-sub">
    Advanced machine learning, explainable AI, and real-time clinical risk detection ‚Äî built for healthcare professionals who demand transparency and precision.
  </p>

  <div class="feature-pills">
    <div class="pill"><div class="dot" style="background:#00b4ff"></div>Explainable AI</div>
    <div class="pill"><div class="dot" style="background:#00e5a0"></div>Risk Alert Engine</div>
    <div class="pill"><div class="dot" style="background:#ffd166"></div>Time-Series Forecasting</div>
    <div class="pill"><div class="dot" style="background:#ff4d6d"></div>Patient Similarity</div>
    <div class="pill"><div class="dot" style="background:#a855f7"></div>Medical Imaging</div>
    <div class="pill"><div class="dot" style="background:#00b4ff"></div>LLM Chat Assistant</div>
  </div>

  <!-- ECG animation -->
  <div class="ecg-wrap">
    <svg width="100%" height="60" viewBox="0 0 1000 60">
      <path class="ecg-line" d="M0,30 L100,30 L120,30 L130,10 L140,50 L150,5 L165,55 L175,30 L300,30 L320,30 L330,15 L340,45 L350,8 L365,52 L375,30 L500,30 L520,30 L530,12 L540,48 L550,6 L565,54 L575,30 L700,30 L720,30 L730,14 L740,46 L750,7 L765,53 L775,30 L1000,30"/>
    </svg>
  </div>
</div>

<!-- RIGHT: Login form -->
<div class="right">
  <div class="login-box">
    <div class="login-header">
      <h2 class="login-title">Welcome back</h2>
      <p class="login-sub">Sign in to your clinical workspace</p>
    </div>

    <!-- Role selector -->
    <div class="role-selector">
      <button class="role-btn active" onclick="selectRole(this, 'physician')" data-role="physician">
        <span class="role-icon">üë®‚Äç‚öïÔ∏è</span>Physician
      </button>
      <button class="role-btn" onclick="selectRole(this, 'analyst')" data-role="analyst">
        <span class="role-icon">üìä</span>Analyst
      </button>
      <button class="role-btn" onclick="selectRole(this, 'admin')" data-role="admin">
        <span class="role-icon">üîê</span>Admin
      </button>
    </div>

    <!-- Credentials -->
    <div class="form-group">
      <label class="form-label">Email / Employee ID</label>
      <input type="text" class="form-input" id="username" placeholder="dr.smith@hospital.org" autocomplete="username">
    </div>

    <div class="form-group">
      <label class="form-label">Password</label>
      <div class="input-wrap">
        <input type="password" class="form-input" id="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password" onkeydown="if(event.key==='Enter')doLogin()">
        <span class="input-icon" onclick="togglePwd()">üëÅ</span>
      </div>
    </div>

    <div class="form-row">
      <label class="remember">
        <input type="checkbox" id="remember">
        Keep me signed in
      </label>
      <a href="#" class="forgot">Reset password</a>
    </div>

    <button class="btn-login" id="loginBtn" onclick="doLogin()">
      <span class="btn-text">Sign In ‚Üí</span>
      <span class="spinner">‚è≥ Authenticating...</span>
    </button>

    <div class="divider">or continue with</div>

    <div class="sso-grid">
      <button class="sso-btn" onclick="ssoLogin('Microsoft')">
        <svg width="16" height="16" viewBox="0 0 16 16"><rect x="0" y="0" width="7" height="7" fill="#f25022"/><rect x="9" y="0" width="7" height="7" fill="#7fba00"/><rect x="0" y="9" width="7" height="7" fill="#00a4ef"/><rect x="9" y="9" width="7" height="7" fill="#ffb900"/></svg>
        Microsoft SSO
      </button>
      <button class="sso-btn" onclick="ssoLogin('SAML')">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm0 14c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6zm-1-9h2v4H7zm0 6h2v2H7z"/></svg>
        SAML / LDAP
      </button>
    </div>

    <div class="security-bar">
      <div class="sec-item"><div class="sec-dot"></div>HIPAA Compliant</div>
      <div class="sec-item"><div class="sec-dot" style="animation-delay:0.5s;background:#ffd166"></div>256-bit TLS</div>
      <div class="sec-item"><div class="sec-dot" style="animation-delay:1s;background:#a855f7"></div>Audit Logged</div>
    </div>
  </div>
</div>

<script>
  let selectedRole = 'physician';
  let pwdVisible = false;

  function selectRole(btn, role) {
    document.querySelectorAll('.role-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    selectedRole = role;
  }

  function togglePwd() {
    pwdVisible = !pwdVisible;
    const inp = document.getElementById('password');
    inp.type = pwdVisible ? 'text' : 'password';
  }

  function showAlert(msg, type='error') {
    const bar = document.getElementById('alertBar');
    bar.textContent = (type==='error' ? '‚ö†Ô∏è ' : '‚úÖ ') + msg;
    bar.className = 'alert-bar show ' + type;
    setTimeout(() => bar.classList.remove('show'), 3500);
  }

  async function doLogin() {
    const username = document.getElementById('username').value.trim();
    const password = document.getElementById('password').value;
    const btn = document.getElementById('loginBtn');

    if (!username) { showAlert('Please enter your email or employee ID'); return; }
    if (!password) { showAlert('Please enter your password'); return; }

    btn.classList.add('loading');

    // Send to Django auth endpoint
    try {
      const res = await fetch('/api/login/', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json', 'X-CSRFToken': getCookie('csrftoken') },
        body: JSON.stringify({ username, password, role: selectedRole })
      });
      const data = await res.json();

      if (data.success) {
        showAlert('Login successful ‚Äî redirecting‚Ä¶', 'success');
        setTimeout(() => { window.location.href = '/'; }, 1000);
      } else {
        showAlert(data.error || 'Invalid credentials. Please try again.');
        btn.classList.remove('loading');
      }
    } catch(e) {
      // Dev mode: bypass to main app
       showAlert('Connection error. Please try again.', 'error');
      btn.classList.remove('loading');
    }
  }

  function ssoLogin(provider) {
    showAlert(`Redirecting to ${provider} login‚Ä¶`, 'success');
    setTimeout(() => { window.location.href = '/'; }, 800);
  }

  function getCookie(name) {
    let v = document.cookie.match('(^|;) ?' + name + '=([^;]*)(;|$)');
    return v ? v[2] : '';
  }
</script>
</body>
</html>
